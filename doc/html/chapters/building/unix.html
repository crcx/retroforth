<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>doc/book/building/unix</title>
<style type="text/css">

    * { color: #000; background: #fff; max-width: 700px; }
    tt, pre { background: #dedede; color: #111; font-family: monospace;
             white-space: pre; display: block; width: 100%; }
    .indentedcode { margin-left: 2em; margin-right: 2em; }
    .codeblock {
      background: #dedede; color: #111; font-family: monospace;
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
      padding: 7px;
      display: block;
    }

    .indentedlist { margin-left: 2em; color: #000; }

    span { white-space: pre; }
    .text  { color: #000; white-space: pre; background: #dedede; }
    .colon { color: #000; background: #dedede; }
    .note  { color: #000; background: #dedede; }
    .str   { color: #000; text-decoration: underline; background: #dedede; }
    .num   { color: #000; background: #dedede; font-weight: bold; font-style: italic; }
    .fnum  { color: #000; font-weight: bold; background: #dedede; }
    .ptr   { color: #000; font-weight: bold; background: #dedede; }
    .fetch { color: #000; font-style: italic; background: #dedede; }
    .store { color: #000; font-style: italic; background: #dedede; }
    .char  { color: #000; background: #dedede; }
    .inst  { color: #000; background: #dedede; }
    .defer { color: #000; background: #dedede; }
    .imm   { color: #000; font-weight: bold; background: #dedede; }
    .prim  { color: #000; font-weight: bolder; background: #dedede; }

    .tt    { white-space: pre; font-family: monospace; background: #dedede; }

    .h1, .h2, .h3, .h4 { white-space: normal; }
    .h1 { font-size: 125%; }
    .h2 { font-size: 120%; }
    .h3 { font-size: 115%; }
    .h4 { font-size: 110%; }
    .hr { display: block; height: 2px; background: #000000; }
</style>
</head><body>
<p><span class="h1">Building on BSD, Linux, macOS, and other Unix Targets</span>
<br/><br/>
Retro is well supported on BSD (tested on FreeBSD, NetBSD,
OpenBSD), Linux, and macOS systems. It should build on any
of these without issue.
<br/><br/>
<span class="h2">Requirements</span>
<br/><br/>
&bull; c compiler &amp; linker<br/>
&bull; standard headers<br/>
&bull; make<br/>
<br/><br/>
<span class="h2">Process</span>
<br/><br/>
For a standard 32-bit system:
<br/><br/>
Run <span class="tt">make</span>
<br/><br/>
This will build the toolchain and then the main <span class="tt">retro</span>
executable.
<br/><br/>
<span class="h2">Executables</span>
<br/><br/>
In the <span class="tt">bin/</span> directory, you should see the following:
<br/><br/>
<tt class='indentedcode'>retro</tt>
<tt class='indentedcode'>retro-unu</tt>
<tt class='indentedcode'>retro-muri</tt>
<tt class='indentedcode'>retro-extend</tt>
<tt class='indentedcode'>retro-embedimage</tt>
<tt class='indentedcode'>retro-describe</tt>
<br/><br/>
<span class="h2">Test The Build</span>
<br/><br/>
You can conduct a quick test of the build by running <span class="tt">bin/retro</span>:
<br/><br/>
<tt class='indentedcode'>./bin/retro</tt>
<br/><br/>
Exit by typing <span class="tt">bye</span> and pressing enter.
<br/><br/>
<span class="h2">Installation</span>
<br/><br/>
You can install Retro globally on BSD systems (and possibly Linux)
by doing:
<br/><br/>
<tt class='indentedcode'>doas&nbsp;make&nbsp;install</tt>
<br/><br/>
or:
<br/><br/>
<tt class='indentedcode'>sudo&nbsp;make&nbsp;install</tt>
<br/><br/>
<span class="h2">Platform Specific Notes</span>
<br/><br/>
<span class="h3">Linux</span>
<br/><br/>
To build on Linux, you need to link with <strong>libdl</strong> if using the optional
FFI. To do this, edit the <span class="tt">GNUmakefile</span> and uncomment this before building:
<br/><br/>
<tt class='indentedcode'>#&nbsp;LIBDL&nbsp;+=&nbsp;-ldl</tt>
<br/><br/>
<span class="h3">Haiku</span>
<br/><br/>
To build on Haiku, you need to link with the <strong>network</strong> library if using
sockets. E.g.:
<br/><br/>
<tt class='indentedcode'>make&nbsp;LDFLAGS=-lnetwork</tt>
<br/><br/>
<span class="h2">Issues</span>
<br/><br/>
If you run into any build issues, please send details to
crc@forth.works so I can work on addressing them as quickly
as possible.
</p>
</body></html>
